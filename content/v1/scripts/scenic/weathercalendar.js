/*! uzai - v0.1.11 - 2017 */

function Calendar(a,b,c){var d=this,e=new Date,f=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],g=[31,28,31,30,31,30,31,31,30,31,30,31];this.year=a,this.month=b,this.date=c,this.ui=null,Calendar.isLeapYear=function(a){return a%4===0&&a%100!==0||a%400===0},this.createUI=function(){var a=document.createElement("TABLE"),b=document.createElement("TBODY"),c=document.createElement("A"),e=document.createElement("A");a.className="calendars g10",c.href="#",c.className="songti f20",c.innerText=c.textContent="<-",c.onclick=function(a){a=a||window.event;var b=new Date(d.year,d.month-2,d.date);d.year=b.getFullYear(),d.month=b.getMonth()+1,d.date=b.getDate(),d.change(d.year,d.month,d.date)},e.href="#",e.className="songti f20",e.innerText=e.textContent="->",e.onclick=function(a){a=a||window.event;var b=new Date(d.year,d.month,d.date);d.year=b.getFullYear(),d.month=b.getMonth()+1,d.date=b.getDate(),d.change(d.year,d.month,d.date)},a.appendChild(b);for(var g=0;8>g;++g){var h=document.createElement("TR");switch(g){case 0:h.className="calendars-title";break;case 1:h.className="calendars-weeks";break;default:h.className="calendars-week-days"}for(var i=0;7>i;++i){var j=document.createElement("TD");switch(g){case 0:switch(i){case 0:j.appendChild(c);break;case 1:i=5,j.colSpan="5",j.className="calendars-title-current-month";break;default:j.appendChild(e)}break;case 1:j.innerText=j.textContent=f[i];break;default:j.innerText=j.textContent=" "}h.appendChild(j)}b.appendChild(h)}return a},this.change=function(a,b,c){$("#div_Calendar tr td div").css({"background-color":"",cursor:""});if(1==b&&31==c||3==b&&31==c||5==b&&31==c||7==b&&31==c||8==b&&31==c||10==b&&31==c||12==b&&31==c){var f=new Date(a,b,c);d.year=f.getFullYear(),d.month=f.getMonth()-1,d.date=f.getDate()}var h=this.ui.rows[0].children[1];h.innerText=h.textContent=a+"年"+(10>b?"0":"")+b+"月";for(var i=2;i<this.ui.rows.length;++i)for(var j=0;7>j;++j){var k=this.ui.rows[i].children[j];k.className="",k.innerText=k.textContent=""}c=new Date(a,b-1,1);var l=c.getDay(),m=1,n=g[b-1]+(2==b&&Calendar.isLeapYear(a)?1:0),o=33,p=0,q=this.ui.rows,r=new Date,s=r.getFullYear(),t=r.getMonth()+1,u=r.getDate(),v=s+"-"+CalendarFormat(t)+"-"+CalendarFormat(u),w=function(c){for(var d=2;d<q.length;++d)for(var f=2==d?l:0;7>f;++f){var g=a==e.getFullYear()&&b==e.getMonth()+1&&m==e.getDate(),h=q[d].children[f];if(h){h.className=g?"calendars-today":"",h.innerText=h.textContent=m;var i=a+"-"+CalendarFormat(b)+"-"+CalendarFormat(m);if(parseInt(i.replace(/-/g,""),10)>parseInt(v.replace(/-/g,""),10)&&(o=m),parseInt(i.replace(/-/g,""),10)>parseInt(v.replace(/-/g,""),10)){var j=(new Date(i),new Date(v),daysBetween(i,v));if("0"!==isChina?j-=1:j=j,0===j)h.innerHTML='<div date="'+i+"\" ><p style='padding-left:5px;'>"+m+"</p><span style=' display:block; width:100px; height:30px;margin-left:6px;' class='fn-clear '> <p class='fl'><img src='"+c.imageTip0+"' alt='' title='白天:"+c.d_descript0+"'/></p>  <span class='fl td_has_text'> <p>"+c.temperature0+"</p><p style='padding-top:4px'>风力："+c.wind0+"</p></span></span><span style=' display:block; width:100px; height:30px;margin-left:6px;' class='fn-clear'><p class='fl'><img src='"+c.d_imageTip0+"' alt='' title='夜晚:"+c.w_descript0+"' /></p><span class='fl td_has_text'><p>"+c.d_temperature0+"</p><p style='padding-top:4px'>风力："+c.d_wind0+"</p></span></span></div>";else if(1===j)h.innerHTML='<div date="'+i+"\"  ><p style='padding-left:5px;'>"+m+"</p><span style=' display:block; width:100px; height:30px;margin-left:6px;' class='fn-clear '> <p class='fl'><img src='"+c.imageTip1+"' alt='' title='白天:"+c.d_descript1+"'/></p>  <span class='fl td_has_text'> <p>"+c.temperature1+"</p><p style='padding-top:4px'>风力："+c.wind1+"</p></span></span><span style='width:100px; display:block; height:30px;margin-left:6px;' class='fn-clear'><p class='fl'><img src='"+c.d_imageTip1+"' alt='' title='夜晚:"+c.w_descript1+"' /></p><span class='fl td_has_text'><p>"+c.d_temperature1+"</p><p style='padding-top:4px'>风力："+c.d_wind1+"</p></span></span></div>";else if(2===j)h.innerHTML='<div date="'+i+"\"  ><p style='padding-left:5px;'>"+m+"</p><span style=' display:block; width:100px; height:30px;margin-left:6px;' class='fn-clear'> <p class='fl'><img src='"+c.imageTip2+"' alt='' title='白天:"+c.d_descript2+"'/></p>  <span class='fl td_has_text'> <p>"+c.temperature2+"</p><p style='padding-top:4px'>风力："+c.wind2+"</p></span></span><span class='fn-clear' style=' display:block; width:100px; height:30px;margin-left:6px;'><p class='fl'><img src='"+c.d_imageTip2+"' alt='' title='夜晚:"+c.w_descript2+"' /></p><span class='fl td_has_text'><p>"+c.d_temperature2+"</p><p style='padding-top:4px'>风力："+c.d_wind2+"</p></span></span></div>";else if(3===j)h.innerHTML='<div date="'+i+"\"  ><p style='padding-left:5px;'>"+m+"</p><span style=' display:block; width:100px; height:30px;margin-left:6px;' class='fn-clear'> <p class='fl'><img src='"+c.imageTip3+"' alt='' title='白天:"+c.d_descript3+"'/></p>  <span class='fl td_has_text'> <p>"+c.temperature3+"</p><p style='padding-top:4px'>风力："+c.wind3+"</p></span></span><span class='fn-clear' style=' display:block; width:100px; height:30px;margin-left:6px;'><p class='fl'><img src='"+c.d_imageTip3+"' alt='' title='夜晚:"+c.w_descript3+"' /></p><span class='fl td_has_text'><p>"+c.d_temperature3+"</p><p style='padding-top:4px'>风力："+c.d_wind3+"</p></span></span></div>";else if(4===j&&"0"!==isChina)h.innerHTML='<div date="'+i+"\"  ><p style='padding-left:5px;'>"+m+"</p><span style=' display:block; width:100px; height:30px;margin-left:6px;' class='fn-clear'> <p class='fl'><img src='"+c.imageTip4+"' alt='' title='白天:"+c.d_descript4+"'/></p>  <span class='fl td_has_text'> <p>"+c.temperature4+"</p><p style='padding-top:4px'>风力："+c.wind4+"</p></span></span><span class='fn-clear' style=' display:block; width:100px; height:30px;margin-left:6px;'><p class='fl'><img src='"+c.d_imageTip4+"' alt='' title='夜晚:"+c.w_descript4+"' /></p><span class='fl td_has_text'><p>"+c.d_temperature4+"</p><p style='padding-top:4px'>风力："+c.d_wind4+"</p></span></span></div>";else if(5===j&&"0"!==isChina)h.innerHTML='<div date="'+i+"\"  ><p style='padding-left:5px;'>"+m+"</p><span style=' display:block; width:100px; height:30px;margin-left:6px;' class='fn-clear'> <p class='fl'><img src='"+c.imageTip5+"' alt='' title='白天:"+c.d_descript5+"'/></p>  <span class='fl td_has_text'> <p>"+c.temperature5+"</p><p style='padding-top:4px'>风力："+c.wind5+"</p></span></span><span class='fn-clear' style=' display:block; width:100px; height:30px;margin-left:6px;'><p class='fl'><img src='"+c.d_imageTip5+"' alt='' title='夜晚:"+c.w_descript5+"' /></p><span class='fl td_has_text'><p>"+c.d_temperature5+"</p><p style='padding-top:4px'>风力："+c.d_wind5+"</p></span></span></div>";else if(6===j&&"0"!==isChina)h.innerHTML='<div date="'+i+"\"  ><p style='padding-left:5px;'>"+m+"</p><span class='fn-clear' style=' display:block; width:100px; height:30px;margin-left:6px;'> <p class='fl'><img src='"+c.imageTip6+"' alt='' title='白天:"+c.d_descript6+"'/></p>  <span class='fl td_has_text'> <p>"+c.temperature6+"</p><p style='padding-top:4px'>风力："+c.wind6+"</p></span></span><span class='fn-clear' style=' display:block; width:100px; height:30px;margin-left:6px;'><p class='fl'><img src='"+c.d_imageTip6+"' alt='' title='夜晚:"+c.w_descript6+"' /></p><span class='fl td_has_text'><p>"+c.d_temperature6+"</p><p style='padding-top:4px'>风力："+c.d_wind6+"</p></span></span></div>";else{var k=$("#bookDate").val();k.split("、");14>j?"0"!==isChina&&j>6?k.replace(/-/g,"").indexOf(i.replace(/-/g,""))>-1?h.innerHTML="<div class='bg_c' id=\""+i+'" date="'+i+"\"  ><p style='padding-left:5px;'>"+m+'</p><span  id="s'+i+"\" class='onget'><p>已选择</p><p class='J_removechange'><a href='javascript:void(0)' onclick='cancel(this)'>取消选择</a></p></span><span id=\"c"+i+"\" class='getDy js_getDy' style='display:none;'  onclick='check(this)'><a href='javascript:void(0)'>选择</a></span></div>":h.innerHTML='<div date="'+i+'" id="'+i+"\"  ><p style='padding-left:5px;'>"+m+'</p><span id="s'+i+"\" class='onget' style='display:none;'><p>已选择</p><p class='J_removechange'><a href='javascript:void(0)' onclick='cancel(this)'>取消选择</a></p></span><span id=\"c"+i+"\" class='getDy js_getDy'  onclick='check(this)'><a href='javascript:void(0)' >选择</a></span></div>":j>7?k.replace(/-/g,"").indexOf(i.replace(/-/g,""))>-1?h.innerHTML="<div class='bg_c' id=\""+i+'" date="'+i+"\"  ><p style='padding-left:5px;'>"+m+'</p><span  id="s'+i+"\" class='onget'><p>已选择</p><p class='J_removechange'><a href='javascript:void(0)' onclick='cancel(this)'>取消选择</a></p></span><span id=\"c"+i+"\" class='getDy js_getDy' style='display:none;'  onclick='check(this)'><a href='javascript:void(0)'>选择</a></span></div>":h.innerHTML='<div date="'+i+'" id="'+i+"\"  ><p style='padding-left:5px;'>"+m+'</p><span id="s'+i+"\" class='onget' style='display:none;'><p>已选择</p><p class='J_removechange'><a href='javascript:void(0)' onclick='cancel(this)'>取消选择</a></p></span><span id=\"c"+i+"\" class='getDy js_getDy'  onclick='check(this)'><a href='javascript:void(0)' >选择</a></span></div>":h.innerHTML='<div date="'+i+'" onclick="getDate(\''+i+"')\" ><p style='padding-left:5px;'>"+m+"</p><br/><a style='display:none;margin-top:9px;' href='javascript:delDate(\""+i+"\")'>取消订阅</a></div>":k.replace(/-/g,"").indexOf(i.replace(/-/g,""))>-1?h.innerHTML="<div class='bg_c' id=\""+i+'" date="'+i+"\"  ><p style='padding-left:5px;'>"+m+'</p><span  id="s'+i+"\" class='onget'><p>已选择</p><p class='J_removechange'><a href='javascript:void(0)' onclick='cancel(this)'>取消选择</a></p></span><span id=\"c"+i+"\" class='getDy js_getDy' style='display:none;'  onclick='check(this)'><a href='javascript:void(0)'>选择</a></span></div>":h.innerHTML='<div date="'+i+'" id="'+i+"\"  ><p style='padding-left:5px;'>"+m+'</p><span id="s'+i+"\" class='onget' style='display:none;'><p>已选择</p><p class='J_removechange'><a href='javascript:void(0)' onclick='cancel(this)'>取消选择</a></p></span><span id=\"c"+i+"\" class='getDy js_getDy'  onclick='check(this)'><a href='javascript:void(0)' >选择</a></span></div>"}p++}else g?h.innerHTML='<div date="'+i+'" onclick="getDate(\''+i+"')\" style='color:#FF0000;'><p style='padding-left:5px;'>今天</p><br/></div>":h.innerHTML='<div date="'+i+'" onclick="getDate(\''+i+"')\" ><p style='padding-left:5px;'>"+m+"</p><br/><a style='display:none;margin-top:9px;' href='javascript:delDate(\""+i+"\")'>取消订阅</a></div>"}++m;for(var r=(new Date(this.year,t,u),v.replace(/-/g,"/")),s=new Date(r),w=(AddDays(s,6).FORMAT("yyyy-MM-dd"),$("#div_Calendar tr td div")),x=0;x<w.length;x++){var y=w[x],z=parseInt(y.html(),10);if(z&&z>0&&32>z){var A=a+"-"+CalendarFormat(b)+"-"+CalendarFormat(z);parseInt(A.replace(/-/g,""),10)>=parseInt(v.replace(/-/g,""),10)&&(y.addClass("calendartdbg1"),$("#bookDate").html().indexOf(A)>-1&&(y.addClass("calendartdbg3"),y.find("a").css("display","block")))}}if(m>n)return}};$.ajax({type:"GET",dataType:"jsonp",cache:!1,url:_uzw.domain.wapi+"/api/UzaiWeather/BookWeatherToWeek/"+treeid,success:function(a){w(a)},error:function(a){}})},this.show=function(a){this.ui=this.ui||this.createUI(),this.change(this.year,this.month,this.date),a.appendChild(this.ui);var b=new Date,c=b.getDate(),d=b.getFullYear(),e=d+"-"+CalendarFormat(this.month)+"-"+CalendarFormat(c+1),f=e.replace(/-/g,"/"),g=new Date(f),h=(AddDays(g,6).FORMAT("yyyy-MM-dd"),this.date,this.month),i=this.year;$("#div_Calendar tr td div").each(function(){var a=parseInt($(this).html(),10);if(a>0&&32>a){var b=i+"-"+CalendarFormat(h)+"-"+CalendarFormat(a);parseInt(b.replace(/-/g,""),10)>=parseInt(e.replace(/-/g,""),10)&&($(this).addClass("calendartdbg1"),$("#bookDate").html().indexOf(b)>-1&&($(this).addClass("calendartdbg3"),$(this).find("a").css("display","block")))}})},this.toString=function(){alert(this.year+"-"+this.month+"-"+this.date)}}function AddDays(a,b){return new Date(Date.parse(a)+864e5*b)}function CalendarFormat(a){return a?a.toString().replace(/^(\d)$/,"0$1"):"0"}function daysBetween(a,b){var c=a.substring(5,a.lastIndexOf("-")),d=a.substring(a.length,a.lastIndexOf("-")+1),e=a.substring(0,a.indexOf("-")),f=b.substring(5,b.lastIndexOf("-")),g=b.substring(b.length,b.lastIndexOf("-")+1),h=b.substring(0,b.indexOf("-")),i=(Date.parse(c+"/"+d+"/"+e)-Date.parse(f+"/"+g+"/"+h))/864e5;return Math.abs(i)}Date.prototype.FORMAT=function(a){var b={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var c in b)new RegExp("("+c+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?b[c]:("00"+b[c]).substr((""+b[c]).length)));return a};
//# sourceMappingURL=/sourcemaps/content/v1/scripts/scenic/weathercalendar.js.map