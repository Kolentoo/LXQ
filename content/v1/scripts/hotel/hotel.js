/*! uzai - v0.1.11 - 2017 */

function hotelTab(){var a=$("#j_hotHotelTab");_uzw.ui.tab("j_hotHotelTab",function(b){var c=a.find(".bd").find(".item"),d=c.eq(b).find("img[data-original]"),e=d.eq(0);e.attr("data-original")!=e.attr("src")&&d.each(function(){var a=$(this),b=a.attr("data-original");a.attr("src",b)})}),a.find(".more-cont").on("click",function(){var a=$(this),b=a.parent(".hd-more");b.hasClass("hd-more-on")?b.removeClass("hd-more-on"):b.addClass("hd-more-on")}),a.find(".hd-more").on("click",".more-item",function(){var a=$(this),b=a.parents(".hd-more"),c=b.siblings(".hd-list").find("li:last");c.click().find("em").text(a.text()),b.removeClass("hd-more-on")})}function hotelSlides(){var a=$("#j_bannerSlides");a.get(0)&&(a.slides({preload:!0,preloadImage:"//r.uzaicdn.com/content/v1/images/common/preload.gif",currentClass:"on",fadeSpeed:300,effect:"fade",crossfade:!0,hoverPause:!0,pause:1e3,play:6e3,generatePagination:!0}),a.find(".slides_control").css({width:"100%"}));var b=$("#j_focusSlides");b.get(0)&&b.slides({preload:!0,preloadImage:"//r.uzaicdn.com/content/v1/images/common/preload.gif",currentClass:"on",fadeSpeed:300,effect:"fade",crossfade:!0,hoverPause:!0,pause:1e3,play:3e3,generatePagination:!0,slidesLoaded:function(){b.find(".slides_container").find("a").width(b.width())}})}function sideSizer(){var a=$("#j_sizerWrap");if(a.get(0)){var b=a.find(".sizer-box");b.width($(".side-box").width()),$(window).scroll(function(){c()});var c=function(){var c=a.offset().top,d=$(window),e=d.scrollTop(),f=b.height(),g=$(".global-footer").offset().top-f-50;e>=c&&g>e?_util.check.isIE6?b.css({top:e,position:"absolute"}):b.css({top:0,position:"fixed"}):e>=g?b.css({position:"absolute",top:g}):b.css({top:0,position:"static"})};c()}}function hotelLazy(){var a=$("#j_RouteList"),b=a.find("img[data-src]");b.each(function(){var a=$(this);a.attr("src",a.attr("data-src"))})}function pshFilter(){$("#j_sortBar").find("li").on("click",function(){var a=$(this),b=a.siblings("li");b.removeClass("on"),a.addClass("on");var c=a.find(".border-arrow"),d=$.trim(a.text());"销量"==d?(c.removeClass("arrow-on"),a.attr({title:"销量从高到低"})):"价格"==d&&(c.addClass("arrow-on"),a.attr({title:"价格从低到高"})),$HotelPackages.staticClass.search()})}function nodeFilter(){var a=$("#j_sizerBox");a.find("li").on("click",function(){var a=$(this),b=a.siblings("li");b.removeClass("on"),a.addClass("on"),$HotelPackages.staticClass.search()})}function hotelCarousel(){var a=$("#j_hotelDetailBox"),b=a.find(".carousel-bar");if(b.get(0)){var c=b.find("li").length,d=screen.width;1152>=d&&b.find(".overview").find("li").css({width:94,"margin-right":9}),c>4?b.tinycarousel({axis:"x",infinite:!1}):b.find(".buttons").hide(),b.find(".overview").find("li").on("click",function(){var a=$(this),c=a.find("img").attr("data-src"),d=a.siblings("li"),e=b.prev(".focus-pic");return d.removeClass("on"),a.addClass("on"),e.get(0)&&e.find("img").attr("src",c),!1}),a.find(".btn-order").on("click",function(){var a=$("#j_hiNavWrap").offset().top;$("body, html").animate({scrollTop:a},800)})}}function multiCalendar(){$("input[data-multi-calendar]").on("focus",function(){var a=$(this);$(".after-calendar").hide();var b=a.parent(),c=b.find(".after-calendar");if(!c.get(0)){a.after('<div class="after-calendar ca-norm ca-norm-multi"></div>'),c=b.find(".after-calendar");var d={jsonpUrl:"",latestDate:"",extCallBack:function(b,d){c.find(".item").on("click",function(){var b=$(this),d=b.hasClass("item-expiry")||b.hasClass("item-gray");if(!d){var e=b.attr("data-year"),f=b.attr("data-month"),g=b.attr("data-day");a.val(e+"-"+f+"-"+g),c.hide();var h=$("#checkInDate"),i=$("#checkOutDate");if(Date.parse($.trim(h.val()).replace(/-/g,"/"))>=Date.parse($.trim(i.val()).replace(/-/g,"/"))){var j=a.attr("id");return"checkInDate"===j&&($("#checkOutDate").val(""),$("#checkOutDate").focus()),"checkOutDate"===j&&($("#checkOutDate").val(""),$("#checkInDate").focus()),!1}$("#checkInDate").removeClass("input-err"),$("#checkOutDate").removeClass("input-err"),$("#nightCount").length&&$("#nightCount").html(dateDiff($("#checkInDate").val(),$("#checkOutDate").val()))}})},preCallback:function(a,b){}};c.jsonMultiCalendar(d)}c.show(),blankFix("j_afterCalendarWrap","after-calendar")})}function listFilter(){var a=$("#j_priceRange");a.find(".textbox").on("focus",function(){var a=$(this);a.siblings("input:button").show()}),a.find(".btn-search").on("click",function(){var a=$(this);a.hide()});var b=$("#j_hotelSizerMod");b.find(".choice-item").on("click",function(){var a=$(this),b=a.children(".control-checkbox"),c=b.hasClass("control-checkbox-on");a.parents("dd");c?(b.removeClass("control-checkbox-on"),b.children("input").prop("checked",!1)):(b.addClass("control-checkbox-on"),b.children("input").prop("checked",!0))}),b.find(".unlimited").on("click",function(){var a=$(this),b=a.parents("dd");b.find("input:checkbox").prop("checked",!1),b.find(".control-checkbox").removeClass("control-checkbox-on")})}function hotelFixNav(){var a=$("#j_hiNavWrap");if(a.get(0)){var b=a.find(".hotel-infos-nav"),c=b.find("li"),d=b.outerHeight(),e=$("#j_hotelInfos"),f=e.find(".hotel-info-mod"),g=b.width();a.height(d),$(window).on("scroll",function(){h()});var h=function(){var e=$(window),h=e.scrollTop(),i=a.offset().top;b.width(g),h>=i?(_util.check.isIE6&&b.css({position:"absolute",top:h}),b.addClass("hi-nav-wrap-fix")):b.removeClass("hi-nav-wrap-fix"),f.each(function(a,b){var e=$(this),f=e.offset().top;return h>=f-d-1?(c.removeClass("on"),c.eq(a).addClass("on"),!0):void 0})};h(),b.find("li").on("click",function(){var a=$(this),b=a.index(),c=a.siblings("li");c.removeClass("on"),a.addClass("on");var e=f.eq(b).offset().top;$("html,body").animate({scrollTop:e-d},800)})}}function sideFixMap(){var a=$("#j_sideMap");if(a.get(0)){var b=a.outerHeight(),c=function(){var c=$(window),d=c.scrollTop(),e=a.parent(".side").offset().top,f=$(".global-footer").offset().top-b-50;d>=e&&f>d?_util.check.isIE6?a.css({position:"absolute",top:d}):a.css({position:"fixed",top:0}):d>=f?a.css({position:"absolute",top:f}):a.css({position:"static"})};a.width(a.parent().width()),c(),$(window).on("scroll",function(){c()})}}function hotelTips(){var a=$("#j_hotelList"),b=$("#j_hotelInfos"),c=function(a,b,c){b=b||".hover-wrap",c=c||".hover-tips",a.on("mouseenter",b,function(){var a=$(this),b=a.find(c);a.css({"z-index":10}),b.show()}).on("mouseleave",b,function(){var a=$(this),b=a.find(c);a.css({"z-index":"auto"}),b.hide()})};c(b,".room-intro-wrap",".room-intro-box"),c(b),c(a),c($("#j_formsListing")),c($("#j_selectPeopleNum").parents(".hotel-search-bar"))}function contentSwitch(){var a=$("#j_hotelList");a.on("click",".room-type",function(){var a=$(this),b=a.parents(".row-item-inner").siblings(".room-intro-box");a.hasClass("on")?(b.hide(),a.removeClass("on")):(b.show(),a.addClass("on"))}),a.on("click",".btn-switch",function(){var a=$(this),b=a.parent(".more-bar").siblings(".hide");a.hasClass("on")?(b.hide(),a.text("更多房型").removeClass("on")):(b.show(),a.text("收起").addClass("on"))});var b=$("#j_hotelSizerMod");if(b.find(".choice-row").length>2){var c=b.find(".more-choice");c.show().on("click",function(){var a=$(this),c=a.find(".mc-cont"),d=a.find(".arrow-wrap");d.hasClass("on")?(b.find(".choice-row:gt(1)").hide(),d.removeClass("on"),c.text("更多")):(b.find(".choice-row:gt(1)").show(),d.addClass("on"),c.text("收起"))})}b.on("click",".btn-switch",function(){var a=$(this),b=a.parent(".main-top").siblings(".main-list");a.hasClass("on")?(b.hide(),a.removeClass("on")):(b.show(),a.addClass("on"))});var d=$("#j_hotelInfos");d.find(".order-room-type").on("click",".btn-switch",function(){var a=$(this),b=a.parent(".more-bar").siblings(".room-table").find("tr.hide");a.hasClass("on")?(b.hide(),a.text("更多房型").removeClass("on")):(b.show(),a.text("收起").addClass("on"))})}function cityControl(){var a=$("#j_jpCityListNode");$("input[data-cities-trigger]").on("focus",function(){var b=$(this),c=b.next("input[type=hidden]");$(".cities-select-mod").hide(),$("#j_jpAllCityFilter").remove();var d=b.parent(".cities-select-wrap"),e=b.siblings(".cities-select-mod");e.after('<ul class="hide city-filter-mod" id="j_jpAllCityFilter"></ul>'),globalCitySelect=$("#j_jpAllCityFilter");var f=e.find(".cities-select-tab");f.get(0)||(e.html(a.html()),_uzw.ui.tab("cities-select-tab"),e.find(".select-item").on("click",function(){var a=$(this),f=a.text(),g=a.attr("data-code");b.val(f),c.val(g),e.hide(),d.css({"z-index":"auto"})})),e.show(),d.css({"z-index":10}),blankFix("cities-select-wrap","cities-select-mod",function(){d.css({"z-index":"auto"}),globalCitySelect.find("li").not(".li-none").eq(0).click(),globalCitySelect.remove()}),e.find(".close-wrap").on("click",function(){e.hide(),d.css({"z-index":"auto"})})})}function hotelPop(){var a=$("#j_selectPeopleNum");if(a.get(0)){var b=$("#j_popLodgerBox"),c=b.find(".pnb-bd"),d=b.find(".j_selectAdultNum"),e=b.find(".j_selectChildNum"),f=a.val(),g=function(a){a>0?c.find(".pnb-side").show():c.find(".pnb-side").hide(),c.find(".main-item").hide(),c.find(".main-item:lt("+a+")").show()};g(e.val()),a.on("change",function(){var c=$(this);"选择更多"===c.val()?(fixIe6("j_popLodgerBox",200),b.show(),_uzw.ui.mask.show(),b.find(".j_popClose").on("click",function(){b.hide(),_uzw.ui.mask.hide(),a.val(f)})):f=c.val()}),e.on("change",function(){g(e.val())}),b.find(".btn-affirm").on("click",function(){var c=$("#otherOption"),g=d.val()+"成人，"+e.val()+"儿童",h=document.getElementById("j_selectPeopleNum"),i=h.options.length,j=!0;b.hide(),_uzw.ui.mask.hide();for(var k=0;i>k;k++){var l=h.options[k];l.value==g&&(l.selected=!0,f=a.val(),j=!1)}j&&(c.get(0)||(a.find("option:last").before('<option value="'+d.val()+","+e.val()+'" id="otherOption"></option>'),c=$("#otherOption")),c.text(d.val()+"成人，"+e.val()+"儿童"),c.val(d.val()+","+e.val()),h.options[2].selected=!0,f=a.val())})}}function dateDiff(a,b){var c,d,e,f;return c=a.split("-"),d=new Date(c[0],c[1]-1,c[2]),c=b.split("-"),e=new Date(c[0],c[1]-1,c[2]),f=parseInt(Math.abs(d-e)/1e3/60/60/24,10)}function fixIe6(a,b){var c=$("#"+a);c.get(0)||(c=$("."+a)),_util.check.isIE6&&(c.css("top",$(document).scrollTop()+b),$(window).on("scroll",function(){c.css("top",$(document).scrollTop()+b)}))}var globalCitySelect=null,hotelLoader={show:function(a){var b=$("#j_popLoader");b.get(0)||($("body").append('<div id="j_popLoader" class="pop-loader tc"><img src="//r.uzaicdn.com/content/v1/images/common/loader.gif" alt="" class="mr10"><span class="pop-info f14">载入中请稍后...</span></div>'),b=$("#j_popLoader")),a&&b.find(".pop-info").text(a),b.show(),fixIe6("j_popLoader",$(window).height()/2)},hide:function(){$("#j_popLoader").hide()}},_hotelLoadList=function(){hotelSlides(),sideSizer(),hotelLazy(),uzLazy(["j_hotHotelTab","j_hotelList"])};window.addEventListener?window.addEventListener("load",function(){_hotelLoadList()},!1):window.attachEvent("onload",function(){_hotelLoadList()}),$(function(){pshFilter(),nodeFilter(),hotelCarousel(),hotelTab(),multiCalendar(),listFilter(),hotelFixNav(),hotelTips(),hotelPop(),sideFixMap(),contentSwitch(),cityControl(),"undefined"!=typeof comGlobalCity&&comGlobalCity()});
//# sourceMappingURL=/sourcemaps/content/v1/scripts/hotel/hotel.js.map