/*! uzai - v0.1.11 - 2017 */

"use strict";function leftFold(){var a=$("#j_jhSide");a.find(".switch").on("click",function(){var b=$(this),c=b.parent("h3").parent("dt").next("dd"),d=a.find(".jingdian-items").find("dd");a.find(".switch").not(b).text("展开"),d.hide(),"收起"===b.text()?(c.hide(),b.text("展开")):(c.show(),b.text("收起"))})}function themeFold(){var a=$(".j_dropSwitch"),b=a.find(".switch"),c=$(".j_themeSwitch"),d=c.find(".theme-inner").height(),e=c.find(".switch");b.on("click",function(){var a=$(this),b=a.find("em"),c=a.find("i"),d=a.parent().siblings(".theme-items").find(".hide");c.hasClass("arrow-bottom")?(b.text("收起"),d.css({display:"inline-block"}),c.attr("class","arrow-top")):(b.text("展开"),d.hide(),c.attr("class","arrow-bottom"))}),d>56&&(e.css({display:"inline-block"}),c.find(".theme-items").addClass("theme-items-cut")),e.on("click",function(){var a=$(this),b=a.find("em"),c=a.find("i"),d=a.parent().siblings(".theme-items");c.hasClass("arrow-bottom")?(b.text("收起"),c.attr("class","arrow-top"),d.removeClass("theme-items-cut")):(b.text("展开"),c.attr("class","arrow-bottom"),d.addClass("theme-items-cut"))})}function mainRouteFold(){var a=$("#j_mainRoute");a.find(".switch").on("click",function(){var a=$(this),b=a.find("em"),c=b.text(),d=a.find(".residue"),e=a.parents("dd").find(".line-list");"展开更多"===c?(b.text("收起"),d.hide(),a.find("i").attr("class","arrow-top"),e.find("li.hide").show()):(b.text("展开更多"),d.show(),a.find("i").attr("class","arrow-bottom"),e.find("li.hide").hide())})}function themeSlides(){$(".theme-slides").get(0)&&$(".theme-slides").slides({effect:"",crossfade:!0,play:5e3,pause:2500,hoverPause:!0,generatePagination:!1})}function departmDateEmpty(){var a=$("#J_cancel");a.on("click",function(){a.siblings(".num-box").val("")})}function huojiaPager(){var a=function(a,b){var c=[],d=$("#hjPagerThumb"),e=$("#hjPager");c.push("<span class='mr10'>"+a+"/"+b+"页</span>"),c.push("<a href='javascript:void(0);' class='btn-item tc vm lh1 prev off' data-num="+(a-1)+" ><span class='arrow-box'><i class='arrow-left'>&nbsp;</i></span></a> "),c.push("<a href='javascript:void(0);' class='btn-item tc vm lh1 next' data-num="+(a+1)+" >下一页<span class='arrow-box pl5'><i class='arrow-right'>&nbsp;</i></span></a>"),d.html(c.join("")),d.find(".btn-item").removeClass("off"),1==a?d.find(".prev").addClass("off"):a==b&&d.find(".next").addClass("off"),d.find(".btn-item").on("click",function(){var a=$(this);if(!a.hasClass("off")){var b=a.attr("data-num"),c=e.find("a[rel="+b+"]");c.length&&c.eq(0).click()}return!1})};$("#hjPager").uzPager({pageSize:15,targetNode:$("#j_mainRoute"),onInit:function(b){a(1,parseInt(b,10))},onCallback:function(b,c){a(parseInt(b,10),parseInt(c,10)),_hjSkip()}}),$("#j_sortBar").find("input:checkbox").on("change",function(a){var b=$(this).parent("a").attr("href");window.location.href=b})}function huojiaSizerFix(){var a=$("#j_mainRoute"),b=a.offset().top,c=$(".sizer-fix-wrap"),d=$("#j_sizerFix"),e=function(){var a=$(window),d=a.scrollTop();d>b?window.XMLHttpRequest?c.addClass("sizer-fixed"):c.css({top:d}):c.removeClass("sizer-fixed")};d.find("li").on("mouseenter",function(){var a=$(this);d.find("li").removeClass("on"),a.addClass("on")}),c.on("mouseleave",function(){c.find("li").removeClass("on")}),e(),$(window).scroll(function(){e()})}function describeFolding(){var a=$("#j_describeBox");a.find(".arrow").on("click",function(){var b=$(this);b.hasClass("arrow-on")?(b.removeClass("arrow-on"),a.find(".describe-box-inner").addClass("cut")):(b.addClass("arrow-on"),a.find(".describe-box-inner").removeClass("cut"))})}function pageHit(){for(var a=document.location.pathname,b=a.split("/"),c=[],d=0;d<b.length;d++){var e=b[d];e&&c.push(e)}var f="",g="";f==c[0],2==c.length&&(g=c[1].split("-")[1]);var h="k="+f+g?"&v="+g:"";c.length&&$.ajax({url:_uzw.domain.wapi+"/api/UzaiHit/?"+h,type:"GET",dataType:"jsonp",contentType:"application/json; charset=utf-8",cache:!0,success:function(a){}})}function startDayFilter(){$(".J_searchDateClear").on("click",function(){var a=$(this),b=a.siblings(".num-box");b.val("")})}function priceFilter(){var a=function(a,d){a=a||1,d=d||999999;var e="data-price-tag='"+a+"-"+d+"'";$("#j_mainRoute_copy").get(0)?b("j_mainRoute_copy",a,d):b("j_mainRoute",a,d),c("data-price",e)},b=function(a,b,c){$("#"+a).find("li").each(function(){var a=$(this),d=a.attr("data-price");parseInt(d,10)>=parseInt(b,10)&&parseInt(d,10)<=parseInt(c,10)&&a.attr("data-price-tag",b+"-"+c)})};$(".price-range-bd").find("input:text").on("keyup",function(a){var b=$(this),c=b.parent(".num-box"),d=c.siblings(".confirm");13==a.keyCode&&d.click()}),$(".J_priceDateBtn").on("click",function(){var b=$(this),c=b.parent(".price-range-bd"),d=c.parent(".price-range"),e=$.trim(c.find("input").eq(0).val()),f=$.trim(c.find("input").eq(1).val());if(e&&f){if(parseInt(e,10)>parseInt(f,10))return;if(parseInt(e,10)<0)return;var g="";g=d.get(0)?$("#j_sizerFix").find(".price-range-bd"):$("#j_sortBar").find(".price-range-bd"),g.find("input").eq(0).val(e),g.find("input").eq(1).val(f),a(e,f)}else e||f||a();return!1}),$(".J_priceDateClear").on("click",function(){$(this);$(".price-range-bd").find("input").val(""),a()});var c=function(a,b){_util.check.isIE6||($("#j_mainRoute").find("li").show(),$("#j_mainRoute").uzSorter({sortBy:b,sortAscTag:a,sortAscKey:"asc",onInit:function(){},onCallback:function(){huojiaPager(),_hjSkip()}}))}}function thirdAd(){var a=$("#hid_TravelClass").val(),b=$("#hid_City").val(),c=$("#hid_AreaTreeID").val(),d=$("#hid_IsArea").val(),e=$("#j_hotLineBar");c&&d&&b&&a&&$.ajax({url:_uzw.domain.wapi+"/api/UzaiProNonstop/?city="+b+"&travelClass="+a+"&AreaTreeID="+c+"&IsArea="+d,type:"GET",dataType:"jsonp",jsonp:"callback",success:function(f){var g="";if(f.length)for(var h=0;h<f.length&&4>h;h++){var i=f[h],j="/ProNonstop/?url="+i.ProductUrl+"&CPrice="+i.ClickPrice+"&city="+b+"&travelType="+a+"&AreaTreeID="+c+"&IsArea="+d+"&ProductID="+i.ProductID;g+="<li",0===h&&(g+=" class='first'"),g+="><a target='_blank' href='"+j+"'><figure class='hot-line'>",g+="<img alt='"+i.Title+"' src='"+i.Pic+"'>",g+="<p class='hot-tag'><i class='icon-hot-tag png'>热推</i></p><figcaption class='hot-line-hd pt5'>"+i.Title+"</figcaption>",g+="<div class='hot-line-footer clearfix'>","0"!=i.TalkLevel&&(g+="<span class='satisficing f999 fl'>满意度："+i.TalkLevel+"%</span>"),g+="<span class='price orange fr'><i>￥<em class='f20'>"+i.MinPrice+"</em></i>起</span></div></figure></a></li>"}g&&(e.get(0)?$("#j_hotLineBar").find("ul").html(g):$(".main-box").prepend('<div id=\'j_hotLineBar\' class="hot-line-bar main-fix"><span class="hot-line-tag f20 yahei tc">悠哉推荐</span><ul class="clearfix">'+g+"</ul></div>"))}})}function listSideAd(){var a=window.location.href,b="http://www.uzai.com/rihan/japan-11414",c="http://sh.uzai.com/outbound/japan-c-11414.html",d="uzwMMJapanTour",e="",f={},g=0;if("sh"===_ug.city&&(a.indexOf(b)>=0||a.indexOf(c)>=0)){e+='<div id="j_sideFixedJp" class="side-fixed-jp yahei"><span class="icon-wrap icon-wrap-off"><i class="icon-1"></i></span><div class="side-cont"><i class="icon-2 png"></i><i class="icon-3 png"></i><i class="icon-4 png"></i><a href="//www.uzai.com/subject/mmrby" class="cont-hd white f18 b" target="_blank">查看美“侣”同款线路</a><span class="btn-fold pointer white f18 b tc">收起</span><embed src="http://player.youku.com/player.php/sid/XMTU2MDM0MjMyMA==/v.swf" type="application/x-shockwave-flash" allowFullScreen="true" quality="high" allowScriptAccess="always" class="side-video" /></div><span class="btn-unfold pointer white f18 b tc">跟着孟孟游日本<span class="btn-cont">展开</span><i class="icon-item png"></i></span></div>',$("body").append(e),f=$("#j_sideFixedJp"),g=f.offset().top,_uzw.cookie.get(d)?(f.addClass("side-fixed-jp-on").find(".icon-wrap").addClass("icon-wrap-off"),f.find(".side-cont").removeClass("side-cont-on"),f.find(".btn-unfold").addClass("btn-unfold-on")):(f.find(".icon-wrap").removeClass("icon-wrap-off"),f.find(".side-cont").addClass("side-cont-on")),setTimeout(function(){f.addClass("side-fixed-jp-on")},500),f.find(".btn-fold").on("click",function(){var a=$(this),b=a.parents(".side-cont");b.removeClass("side-cont-on").siblings(".icon-wrap").addClass("icon-wrap-off").siblings(".btn-unfold").addClass("btn-unfold-on"),_uzw.cookie.set(d,"1",1)}),f.find(".btn-unfold").on("click",function(){var a=$(this);a.removeClass("btn-unfold-on").siblings(".icon-wrap").removeClass("icon-wrap-off").siblings(".side-cont").addClass("side-cont-on")}),_util.check.isIE6&&$(window).scroll(function(){var a=$(window),b=a.scrollTop();b>0&&f.css({top:b+g})});var h=$("#J_appMask"),i=$("#J_appMaskArr"),j="uzwAppNotice",k=230,l=110;f.get(0)&&(i.on("click",function(){$(this);f.animate({bottom:k},800)}),h.find(".app-mask-close").on("click",function(){f.animate({bottom:l},800)}),_uzw.cookie.get(j)?f.css({bottom:l}):f.css({bottom:k}))}}function ziyouban(){var a=$("#j_choiceItem"),b=a.find(".other-city-box").find("a"),c=a.find(".recommend-city").find(".switch"),d=a.find(".theme-items");b.on("click",function(){var a=$(this),b=a.text(),c=a.siblings(),e=a.parent(),f=e.siblings();a.addClass("on"),c.removeClass("on"),f.find("a").removeClass("on"),d.find(".hot-list").removeClass("on"),d.find(".hide").text(b).addClass("on").show()}),c.on("click",function(){$(".other-city-box").toggle()});var e=$(".jwct").siblings();$(".jwct").on("click",function(){$(".recommend-city").children(".hide").show()}),e.on("click",function(){$(".recommend-city").children(".hide").hide(),$(".other-city-box").hide()})}$(function(){leftFold(),themeFold(),mainRouteFold(),themeSlides(),departmDateEmpty(),uzLazy(["j_lazy","j_mainRoute"]),huojiaPager(),gHoverEvent($("#j_priceRangeBd")),huojiaSizerFix(),describeFolding(),priceFilter(),startDayFilter(),thirdAd(),$(".hot-line-bar").get(0)&&$("#j_jhSide").css({"padding-top":0}),_uzw.ui.tab("other-city-tab"),ziyouban()}),winLoadFix(function(){_ug.hotview.set()});var _hjSkip=function(){var a=$("#j_sortBar"),b=a.offset().top;$("body,html").animate({scrollTop:b},500)};!function(a){a.fn.marqueeFn=function(b){function c(){d.scrollLeft()>=e.outerWidth()/2||d.scrollLeft()>=e.outerWidth()-d.innerWidth()?d.scrollLeft(0):d.scrollLeft(d.scrollLeft()+h)}b=a.extend({speed:1},b);var d=a(this),e=a(d).find("ul"),f=a(e).find("li"),g=f.outerWidth()*f.length<d.innerWidth();if(!g){var h=1,i=b.speed,j=setInterval(c,i);f.clone().appendTo(e),f=a(e).find("li"),e.css("width",f.outerWidth()*f.length),e.hover(function(){clearInterval(j)},function(){j=setInterval(c,i)})}}}(jQuery);
//# sourceMappingURL=/sourcemaps/content/v1/scripts/channel/list.js.map