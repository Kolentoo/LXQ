/*! uzai - v0.1.11 - 2017 */

"use strict";function contentSwitch(){var a=$("#j_sideDestMod");a.on("click",".btn-switch",function(){var b=$(this),c=b.find(".btn-cont"),d=b.find(".arrow-mod"),e=b.parents(".mod-hd"),f=e.siblings(".mod-hd"),g=e.next(".mod-bd");f.find(".arrow-mod").removeClass("on"),f.find(".btn-cont").text("展开"),a.find(".mod-bd").hide(),d.hasClass("on")?(d.removeClass("on"),c.text("展开"),g.hide()):(d.addClass("on"),c.text("收起"),g.show())})}function commentControl(a){var b=$("#j_popupCommentControl"),c=b.find(".focus-photo").find("img"),d=b.find(".photo-describe"),e=b.find(".pager-info"),f=$("#j_photoCarousel"),g=f.find(".photo-item"),h=g.length,i=f.parent(".photo-carousel-wrap"),j=function(a){var b=a.height(),c=a.width(),d=b/c;.75>d?(a.attr("style","height: auto; width: 100%; position: absolute; left: 0; top: 50%;"),a.css("margin-top",-a.height()/2)):a.removeAttr("style")},k=function(){var b=function(a,b){a.jcarousel("scroll",b,!1)};f.get(0)&&(f.on("jcarousel:createend",function(){b($(this),a)}).on("jcarousel:reloadend",function(){b($(this),a)}).jcarousel({vertical:!0}),i.find(".btn-prev").on("jcarouselcontrol:active",function(){$(this).removeClass("btn-off")}).on("jcarouselcontrol:inactive",function(){$(this).addClass("btn-off")}).jcarouselControl({target:"-=5"}),i.find(".btn-next").on("jcarouselcontrol:active",function(){$(this).removeClass("btn-off")}).on("jcarouselcontrol:inactive",function(){$(this).addClass("btn-off")}).jcarouselControl({target:"+=5"}))};e.find("i").text(h),j(c),k(),g.imagesLoaded(function(){g.each(function(){var a=$(this);j(a.find("img"))})}).on("click",function(){var a=$(this),b=a.find("img"),f=a.index(),g=a.siblings(".photo-item"),h=b.attr("src"),i=b.attr("alt");g.removeClass("on"),a.addClass("on"),c.attr("src",h),j(c),d.text(i).attr("title",i),e.find("em").text(f+1)})}function commentPopup(){var a,b,c,d,e=$("#j_commentInfoMod"),f=e.find(".comment-cont"),g=f.find(".pic-list").find(".list-item"),h=(g.length,$("#j_popupCommentControl")),i=function(){var a=f.find(".cont-text").text(),b="",c="";h.get(0)||(b='<div class="popup-comment-control hide" id="j_popupCommentControl"><span class="popup-close j_popupClose j_popClose"><i class="close-icon">&times;</i></span><div class="control-gallery clearfix"><div class="gallery-main"><p class="focus-photo tc"><img src="" alt=""></p><div class="info-bar f14 clearfix"><span class="pager-info f999 fr"><em class="f666"></em>／<i></i></span><div class="info-main"><p class="photo-describe ellipsis" title=""></p></div></div></div><div class="photo-carousel-wrap"><p class="btn-item btn-prev"><span class="arrow-mod songti"><em>◆</em><i>◆</i></span></p><div class="photo-carousel" id="j_photoCarousel"><ul class="photo-list tc"></ul></div><p class="btn-item btn-next"><span class="arrow-mod songti"><em>◆</em><i>◆</i></span></p></div></div><div class="comment-cont f666 f14 mt10"></div></div>',$("body").append(b),h=$("#j_popupCommentControl"),g.each(function(){var a=$(this),b=a.attr("data-sub-html"),d=a.find("img").attr("data-original");c+='<li class="photo-item"><img src="'+d+'" alt="'+b+'"></li>'}),h.find(".photo-list").html(c),h.find(".comment-cont").text(a))};i(),a=h.find(".focus-photo").find("img"),b=h.find(".photo-describe"),c=h.find(".pager-info"),d=h.find(".photo-list").children(".photo-item"),g.find("img").on("click",function(){var e=$(this),f=e.parents(".list-item"),g=f.index(),h=f.attr("data-sub-html"),i=f.attr("data-src");a.attr("src",i),b.text(h).attr("title",h),c.find("em").text(g+1),d.eq(g).addClass("on").siblings(".photo-item").removeClass("on"),_uzw.ui.pop("j_popupCommentControl",".popup-comment-control"),commentControl(g)})}$(function(){contentSwitch(),commentPopup(),uzLazy(["line-list","j_commentInfoMod"])}),$.fn.imagesLoaded=function(a){var b=this.find("img"),c=b.length;return b.bind("load",function(){--c<=0&&a.call(b,this)}).each(function(){if(this.complete||void 0===this.complete){var a=this.src;this.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",this.src=a}}),this};
//# sourceMappingURL=/sourcemaps/content/v1/scripts/channel/comment.js.map