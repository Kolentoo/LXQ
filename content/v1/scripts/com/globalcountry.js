/*! uzai - v0.1.11 - 2017 */

function comGlobalCountry(){var a=$("body"),b=$("input[data-countries-trigger]");if(b.get(0)){var c="uzwGlobalCountries",d=function(){return $.ajax({url:_uzw.domain.wapi+"/api/UzaiFlight/countrylist",cache:!1,dataType:"jsonp"})};_util.localStorage.cache(c,1,d,function(a){a&&a.length&&(listRealGlobalCountry=a)});var e=function(){$(".countries-select-mod").hide(),globalCountrySelect.remove()},f=function(a,b){var c=a.siblings(".countries-select-mod"),d=$.trim(a.val().toUpperCase());if(!d)return globalCountrySelect.hide(),void c.show();c.hide(),globalCountrySelect.show();var f=b.keyCode?b.keyCode:b.which;if("38"!=f&&"40"!=f){var g,h,i,j,k,l=[],m=listRealGlobalCountry.length;for(g=0;m>g&&(h=listRealGlobalCountry[g],i=h.a.toUpperCase(),j=h.b.toUpperCase(),k=h.c.toUpperCase(),(0===j.indexOf(d)||0===k.indexOf(d))&&l.push('<li data-code="'+i+'"><span class="s1">'+j+'</span><span class="s2">'+k+"</span></li>"),!(l.length>=10));g++);for(g=0;m>g&&(h=listRealGlobalCountry[g],i=h.a.toUpperCase(),j=h.b.toUpperCase(),k=h.c.toUpperCase(),!(l.length>=10));g++)(j.indexOf(d)>0||k.indexOf(d)>0)&&l.push('<li data-code="'+i+'"><span class="s1">'+j+'</span><span class="s2">'+k+"</span></li>");globalCountrySelect.html(l.join(""))}globalCountrySelect.find("li").on("mouseenter",function(){var a=$(this),b=a.siblings("li");b.removeClass("on"),a.addClass("on")}).on("click",function(){var b=$(this),c=b.find(".s1").text(),d=b.attr("data-code");a.val(c),a.next("input").val(d),e()}),globalCountrySelect.find("li").not(".li-none").length<=0?(globalCountrySelect.empty(),globalCountrySelect.append("<li class='li-none'>找不到'"+d+"'</li>"),a.siblings("input:hidden").val("")):globalCountrySelect.find(".li-none").remove()},g=function(a){var b=(a.val().toUpperCase(),globalCountrySelect.find("li").not(".li-none")),c=a.next("input"),d=b.filter(".on");d.get(0)||(d=b.eq(0));var f=d.find(".s1");a.val(f.text()),c.val(d.attr("data-code")),e()};a.on("blur","input[data-countries-trigger]",function(a){var b=$(this);if($.trim(b.val())){var c=b.next("input"),d=globalCountrySelect.find("li").not(".li-none");(1==d.length||d.eq(0).find(".s1").text()==b.val())&&(b.val(d.eq(0).find(".s1").text()),c.val(d.eq(0).attr("data-code")),e())}}),a.on("keyup","input[data-countries-trigger]",function(a){var b=$(this),c=b.next("input");c.val(""),f(b,a)});var h=function(a,b){var c=globalCountrySelect.find("li");if("down"===b)if(c.filter(".on").length){var d=c.filter(".on").next("li");c.removeClass("on"),d.get(0)?d.addClass("on"):c.eq(0).addClass("on")}else c.removeClass("on"),c.eq(0).addClass("on");else if("up"===b)if(c.filter(".on").length){var f=c.filter(".on").prev("li");c.removeClass("on"),f.get(0)?f.addClass("on"):c.last("li").addClass("on")}else c.removeClass("on"),c.last("li").addClass("on");else if("enter"===b)return g(a),e(),a.blur(),!1};b.on("keydown",function(a){var b=$(this),c=a.keyCode?a.keyCode:a.which;if("9"==c||"16"==c||"17"==c||"18"==c)return void $(".hot-city").hide();if("38"==c)h(b,"up");else if("40"==c)h(b,"down");else if("13"==c)return h(b,"enter"),!1});var i=function(){var a=(location.href.toLowerCase(),$("input[data-countries-trigger]").next("input:hidden"));a.each(function(a,b){var c=$(this),d=c.prev("input[data-countries-trigger]"),e=getCountryByCode(c.val());d.val(e)})};i()}}function getCountryByCode(a){if(a){for(var b="",c=0;c<listRealGlobalCountry.length;c++){var d=listRealGlobalCountry[c],e=d.a,f=d.b,g=d.c;if(e.toLowerCase()==a.toLowerCase()){b=f||g;break}}return b}return""}var listRealGlobalCountry=[];
//# sourceMappingURL=/sourcemaps/content/v1/scripts/com/globalcountry.js.map