"use strict";var zxWxCFG={act:"zxlywd",appId:"wx58659ee3a00d228e",debug:false};function uzWXApi(zxCFG,isGetOpenID,cbOBJ){var uztest=_util.url.get(location.href,"uztest");if(uztest){zxCFG.debug=true;_uzm.pop.cup(location.href+"\r\n---\u5206\u9694\u7B26---\r\n"+"uztest"+uztest+"\r\n---\u5206\u9694\u7B26---\r\n"+document.cookie)}var myCFG=typeof zxCFG==="string"?{act:zxCFG}:zxCFG;if(!_uzm.mobile.isWeiXin){return}if(isGetOpenID){var ckName="_uzmWeixinOpenID_"+(myCFG.act||zxWxCFG.act);var ck=_uzm.cookie.get(ckName);if(!ck){var mid="http://m.uzai.com/weixin/WxCallback.html?MyUrl="+encodeURIComponent(decodeURIComponent(location.href).replace("#rd&","&").replace("#rd",""));location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+(myCFG.appId||zxWxCFG.appId)+"&redirect_uri="+encodeURIComponent(mid)+"&response_type=code&scope=snsapi_base&state=STATE#wechat_redirect"}}var _wxCustomizePageInfo=function _wxCustomizePageInfo(){if(typeof wx==="function"){_unitEvent()}else{_util.file.load("//res.wx.qq.com/open/js/jweixin-1.0.0.js",function(){_unitEvent()},true)}var _unitGetSubjectName=function _unitGetSubjectName(){var ur=location.pathname.toLowerCase();var tag=ur.replace("/subject/","").replace("/","");return tag||""};var wxConfigData={debug:myCFG.debug||false,jsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo"]};var _unitShareData=function _unitShareData(tp){var pd=window.pageData;var txtInfo={hitType:"event",eventCategory:"activity-"+_unitGetSubjectName()+"-"+_uzm.terminal.source,eventAction:"share"};var _unitRecord=function _unitRecord(shareType,status){txtInfo.eventLabel=shareType+status;try{ga("send",txtInfo)}catch(e){}};var _unitPageData=function _unitPageData(shareType){pd.trigger=function(res){_unitRecord(shareType,"trigger");cbOBJ&&cbOBJ.trigger&&cbOBJ.trigger()};pd.success=function(res){_unitRecord(shareType,"success");cbOBJ&&cbOBJ.success&&cbOBJ.success()};pd.fail=function(res){_unitRecord(shareType,"fail");cbOBJ&&cbOBJ.fail&&cbOBJ.fail()};pd.cancel=function(res){_unitRecord(shareType,"cancel");cbOBJ&&cbOBJ.cancel&&cbOBJ.cancel()};pd.complete=function(res){_unitRecord(shareType,"complete");cbOBJ&&cbOBJ.complete&&cbOBJ.complete()}};if(tp=="onMenuShareAppMessage"){_unitPageData("\u5FAE\u4FE1\u597D\u53CB")}else if(tp=="onMenuShareTimeline"){_unitPageData("\u5206\u4EAB\u5230\u670B\u53CB\u5708")}else if(tp=="onMenuShareQQ"){_unitPageData("QQ\u597D\u53CB")}else if(tp=="onMenuShareWeibo"){_unitPageData("\u65B0\u6D6A\u5FAE\u535A")}return pd};var _unitEvent=function _unitEvent(){var cdis=$("meta[name=\"description\"]").attr("content")||"";var cpic=$("meta[name=\"weixin-pic\"]").attr("content")||"";var ptc=location.protocol.toLowerCase();var pdTemp=window.pageData||{};var imgUrl=pdTemp.imgUrl||cpic||_uzm.domain.cdn+"/content/v1/images/common/logo-icon.png";imgUrl=imgUrl.replace("https://","").replace("http://","");imgUrl=ptc+imgUrl;var pageData={title:pdTemp.title||document.title||"\u4F17\u4FE1\u60A0\u54C9\u65C5\u6E38",desc:pdTemp.desc||cdis||"\u4F17\u4FE1\u60A0\u54C9\u65C5\u6E38",link:pdTemp.link||location.href,imgUrl:imgUrl,type:pdTemp.type||"",dataUrl:pdTemp.dataUrl||""};if(wxConfigData.debug){alert(JSON.stringify(pageData))}$.ajax({type:"GET",dataType:"jsonp",cache:false,data:{"gzh":myCFG.act||zxWxCFG.act,url:location.href.replace(location.hash,"")},url:_uzm.domain.weixinapi+"/ashx/wxAccessToken.ashx",success:function success(res){if(res){wxConfigData.signature=res.signature;wxConfigData.nonceStr=res.noncestr;wxConfigData.appId=res.appId;wxConfigData.timestamp=res.timestamp;wxConfigData.appSecret=res.appSecret;window.wx.config(wxConfigData);window.wx.error(function(res){if(wxConfigData.debug){alert(JSON.stringify(res))}});window.wx.ready(function(){window.wx.onMenuShareAppMessage(_unitShareData("onMenuShareAppMessage"));window.wx.onMenuShareTimeline(_unitShareData("onMenuShareTimeline"));window.wx.onMenuShareQQ(_unitShareData("onMenuShareQQ"));window.wx.onMenuShareWeibo(_unitShareData("onMenuShareWeibo"))});cbOBJ&&cbOBJ.load&&cbOBJ.load()}}})}};_wxCustomizePageInfo()}
