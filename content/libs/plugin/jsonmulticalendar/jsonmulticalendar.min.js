/*! uzai - v0.1.11 - 2017 */

/*!
 * jsonchou 双日历插件
 * d:2014-08-12
 * v:0.1.2
 */
!function(a){var b=["周日","周一","周二","周三","周四","周五","周六"],c=["SUN","MON","TUE","WED","THU","FRI","SAT"],d=[31,28,31,30,31,30,31,31,30,31,30,31],e=new Date,f={"0101":"元旦","0214":"情人节","0305":"学雷锋纪念日","0308":"妇女节","0312":"植树节","0315":"消费者权益日","0401":"愚人节","0405":"清明节","0501":"劳动节","0504":"青年节","0601":"儿童节","0701":"建党节","0801":"建军节","0903":"抗战胜利日","0910":"教师节",1124:"感恩节",1224:"平安夜",1225:"圣诞节"},g={"0101":"春节","0115":"元宵节","0505":"端午节","0815":"中秋节","0707":"七夕","0909":"重阳节",1208:"腊八节","0100":"除夕"},h={isLeapYear:function(a){return a%4===0&&a%100!==0||a%400===0},formatDate:function(a){return a?new Date(Date.parse(a.replace(/-/g,"/"))):new Date},compareDate:function(a,b){return a&&b?(a=Date.parse(a.replace(/-/g,"/")),b=Date.parse(b.replace(/-/g,"/")),a>b?1:a==b?0:-1):void 0},getYear:function(a){var b=a?this.formatDate(a):e;return b.getFullYear()},getMonth:function(a){var b=a?this.formatDate(a):e;return b.getMonth()+1},getDate:function(a){var b=a?this.formatDate(a):e;return b.getDate()},getFirstDate:function(a,b){return new Date(a,b-1,1).getDay()},getMonthDays:function(a,b){var c=b,e=0;return e=d[c-1],2==c&&(e=this.isLeapYear(a)?29:28),e},fixYearByMonth:function(a,b,c){var d=a,e=b;return"next"==c?(e=b+1,13==e&&(e=1,d+=1)):"prev"==c&&(e=b-1,0===e&&(e=12,d-=1)),d+"-"+e},getLunarBySolar:function(a){if(a){var b=(parseInt(a.split("-")[0],10),parseInt(a.split("-")[1],10),parseInt(a.split("-")[2],10),[54440,54432,55888,23208,22176,43736,9680,37584,51544,43344,46240,46416,46416,21928,19360,42416,21176,21168,43312,29864,27296,44368,19880,19296,38256,42208,53856,59696,54576,23200,27472,38608,19176,19152,42192,53848,53840,54560,55968,46496,22224,19160,18864,42168,42160,43600,46376,27936,44448,21936]),c=[64,2,7,0,80,4,9,0,96,4,0,32,96,5,0,48,176,6,0,80,2,7,0,80,3],d=function(a){var b=c[a-2001>>1];return 0===(a-2001&1)?b>>4:15&b},e=function(a,c){var e,f,g;return e=0,f=29,g=16-c,c>d(a)&&d(a)>0&&g--,(b[a-2001]&1<<g)>0&&f++,c==d(a)&&(e=(b[a-2001]&1<<g-1)>0?30:29),f+(e<<16)},f=function(a){var b,c;b=0;for(var d=1;12>=d;d++)c=e(a,d),b+=c>>16&65535,b+=65535&c;return b},g=function(a){var b,c="甲乙丙丁戊己庚辛壬癸",d="子丑寅卯辰巳午未申酉戌亥";return b=c.substr((a-4)%10,1),b+=d.substr((a-4)%12,1),b+"年"},i=function(a){return a+"月"},j=function(a){return a+"日"},k=function(a){var b,c,k,l,m=!1,n=6e4,o=60*n,p=24*o;if(!a)return"";var q=h.formatDate(a),r=Math.round(q.getTime()/p)-11323;if(23>r)iYear=2e3,k=12,l=r+7;else{for(r-=23,c=2001,k=1,l=1,b=f(c);r>=b;)r-=b,c++,b=f(c);for(b=65535&e(c,k);r>=b;){if(r-=b,k==d(c)){if(b=e(c,k)>>16,b>r){m=b>0?!0:!1;break}r-=b}k++,b=65535&e(c,k)}l+=r}return g(c)+"|"+(m?"闰":"平")+"|"+i(k)+"|"+j(l)};return k(a)}return""}};a.fn.jsonMultiCalendar=function(d){var e=a.extend({},a.fn.jsonMultiCalendar.option,d);return this.each(function(d,j){var k=a(this),l=[];if(k.get(0)){var m=e.latestDate;m&&new Date(m)<new Date&&(m=h.getYear()+"-"+h.getMonth()+"-"+h.getDate());var n=k.find(".j_jsonMultiCalendarWrap"),o=function(){var b=n.find(".item"),c=function(a,b){var c="";for(var d in b)if(d==a){c=b[d];break}return c};b.each(function(b,d){var e=a(this),i=parseInt(e.attr("data-year"),10),j=parseInt(e.attr("data-month"),10),k=parseInt(e.attr("data-day"),10);i=10>i?"0"+i:i+"",j=10>j?"0"+j:j+"",k=10>k?"0"+k:k+"";var l=c(j+k,f);if(!l){var m=h.getLunarBySolar(i+"-"+j+"-"+k);if(m){var n=m.split("|"),o=parseInt(n[2].replace("月",""),10),p=parseInt(n[3].replace("日",""),10),q=(10>o?"0"+o:o+"")+""+(10>p?"0"+p:p+"");l=c(q,g)}}if(l){var r=e.find(".box"),s=r.find("a.holiday");s.get(0)||(r.addClass("box-holiday"),r.append("<a class='holiday' href='javascript:;' title='"+l+"' >"+l+"</a>"))}})},p=function(a,b,c){var d=a.split("-")[0]||h.getYear(),f=a.split("-")[1]||h.getMonth(),g=b.split("-")[0]||h.getYear(),i=b.split("-")[1]||h.getMonth();n.get(0)||k.append("<div class='clearfix j_jsonMultiCalendarWrap' ></div>"),n=k.find(".j_jsonMultiCalendarWrap"),c||n.html("<div class='calendar-mod calendar-L' data-year='"+d+"' data-month='"+f+"' ></div><div class='calendar-mod calendar-R'  data-year='"+g+"' data-month='"+i+"' ></div>"),r(d,f,g,i),"next"==c?(w(c),s(g,i,c),v(g,i)):"prev"==c?(w(c),s(d,f,c),v(d,f)):(s(d,f),s(g,i),v(d,f),v(g,i)),u(d,f),o(),q(),e.extCallBack(d,f)},q=function(){var b=e.skipDays;if(b){for(var c=k.find("td.today"),d=c.parent("tr"),f=[],g=function(c){c.children("td").each(function(c,d){var e=a(this);if(!e.hasClass("item-expiry")&&!e.hasClass("item-gray")){if(!(f.length<b))return!0;f.push(e)}})},h=d;h&&h.get(0);)if(g(h),f.length<b)try{h=h.next(),h.get(0)||(h=d.parents(".calendar-L").siblings(".calendar-R").find("tbody").find("tr").first())}catch(i){}else h=null;for(var j=0;j<f.length;j++)f[j].addClass("item-unused")}},r=function(b,c,d,f){var g=n.find(".prev"),i=n.find(".next"),j=c==h.getMonth()&&b==h.getYear()?"prev-off":"";if(m){var k=h.getYear(m)+"-"+h.getMonth(m)+"-1",l=b+"-"+c+"-1";h.compareDate(k,l)}if(g.get(0))j?g.addClass(j):g.removeClass("prev-off");else{var o=[];o.push("<div class='prev "+j+"' title='上月'>上月</div>"),o.push("<div class='next' title='下月'>下月</div>"),n.prepend(o.join("")),g=n.find(".prev"),i=n.find(".next")}var p=function(d){var f=a(this);if(!f.hasClass("prev-off")){y();var g=h.fixYearByMonth(b,c,"prev");e.preCallback(parseInt(g.split("-")[0],10),parseInt(g.split("-")[1],10))}},q=function(b){var c=a(this);if(!c.hasClass("next-off")){x();var g=h.fixYearByMonth(d,f,"next");e.preCallback(parseInt(g.split("-")[0],10),parseInt(g.split("-")[1],10))}};g.unbind("click").bind("click",p),i.unbind("click").bind("click",q)},s=function(a,d,e){var f=n.find(".calendar-mod[data-year='"+a+"'][data-month='"+d+"']");"next"==e?f=n.find(".calendar-mod").eq(1):"prev"==e&&(f=n.find(".calendar-mod").eq(0));var g=0;f.attr("data-year",a),f.attr("data-month",d);var i=h.getFirstDate(a,d),j=h.getMonthDays(a,d),k=h.fixYearByMonth(a,d,"prev"),l=h.getMonthDays(parseInt(k.split("-")[0],10),parseInt(k.split("-")[1],10)),m=h.fixYearByMonth(a,d,"next"),o=(h.getMonthDays(parseInt(m.split("-")[0],10),parseInt(m.split("-")[1],10)),[]);for(o.push("<div  class='calendarBox'>"),o.push("<table>"),o.push("<thead>"),o.push("<tr>"),g=0;g<b.length;g++){var p="";(0===g||6===g)&&(p="class='th-weekend-tit'"),o.push("<th "+p+"><p class='p1'><span class='s1'>周</span><span class='s2'>"+b[g].replace("周","")+"</span></p><p class='p2'>"+c[g]+"</p></th>")}o.push("</tr>"),o.push("</thead>"),o.push("<tbody>");var q=[];for(g=i-1;g>=0;g--)q.push(parseInt("-"+(l-g),10));for(g=1;j>=g;g++)q.push(g);var r=42,s=r-i-j;for(g=0;s>g;g++)q.push(parseInt("-"+(g+1),10));for(g=0;g<q.length;g++){var t=q[g],u="",v=g%7;if(0===v&&o.push("<tr>"),0>=t){u="item item-gray",0===v?u+=" item-sun":6===v&&(u+=" item-sat");var w=parseInt(t.toString().replace("-",""),10);h.getDate()>w&&(u+=" item-expiry");var x;w>=20?x=h.fixYearByMonth(parseInt(a,10),parseInt(d,10),"prev"):15>=w&&(x=h.fixYearByMonth(parseInt(a,10),parseInt(d,10),"next")),o.push("<td data-month='"+x.split("-")[1]+"'  data-year='"+x.split("-")[0]+"'  data-day='"+w+"' class='"+u+"'><div class='box'><div class='day'>"+w+"</div></div></td>")}else u="item",0===v?u+=" item-sun":6===v&&(u+=" item-sat"),h.getYear()==a&&h.getMonth()==d&&(h.getDate()>t?u+=" item-expiry":h.getDate()==t&&(u+=" today")),o.push("<td data-month='"+d+"'  data-year='"+a+"'  data-day='"+t+"' class='"+u+"'><div class='box'><div class='day'>"+t+"</div></div></td>");6===v&&o.push("</tr>")}o.push("</tbody>"),o.push("</table>"),o.push("</div>"),f.html(o.join(""))},t=function(a,b){if(l&&l.length>0){var c=l;for(i=0;i<c.length;i++){var d=c[i],e=d.id?"data-id='"+d.id+"' ":" ",f=d.title,g=d.ext,h=d.date.replace("-0","-").replace("-0","-"),j=d.url?d.url:"#",k=d.url?"target='_blank' ":" ",m=d.price||0,o=d.Chprice||0,p=d.tag,q=parseInt(d.cut,10),r=d.beforeDay,s=d.beforeHour,t=d.endDate,u=d.endTime,v=d.priceCheap||0,w=d.cheapExt,x=d.UzaiJouneryGroupID,y=[];if(w&&w.length>0)for(var z=0;z<w.length;z++){var A=w[z];y.push("<div class='cheap-item' data-tag='"+A.Tag+"'  data-desc='"+A.Desc+"'  data-price='"+A.Price+"'  data-max='"+A.Max+"' ></div>")}var B="";0===q?B="<i class='sq'>售罄</i>":q>0&&2>q?B="<i class='jz'>紧张</i>":q>=2&&6>q?B="<i class='yw'>余位:"+q+"</i>":q>=6&&(B="<i class='cz'>充足</i>");var C=h.split("-")[0],D=h.split("-")[1],E=h.split("-")[2],F=n.find(".calendar-mod[data-year='"+C+"'][data-month='"+D+"']"),G=F.find(".item[data-day='"+E+"']");if(G.get(0)){if(G.find("a.block").get(0))return;var H=[];H.push("<a "+k+" "+e+" href='"+j+"' class='block'>"),f&&H.push("<div class='title hide'>"+f+"</div>"),g&&H.push("<div class='ext hide'>"+g+"</div>"),h&&H.push("<div class='date hide'>"+h+"</div>"),m&&(m.indexOf("￥")>-1?H.push("<div class='price hide'>"+m+"</div>"):H.push("<div class='price hide'>￥"+m+"</div>")),o&&(o.indexOf("￥")>-1?H.push("<div class='cprice hide'>"+o+"</div>"):H.push("<div class='cprice hide'>￥"+o+"</div>")),p&&H.push("<div class='tag hide'>"+p+"</div>"),B&&H.push("<div class='cut hide' data-cut='"+q+"' >"+B+"</div>"),r&&H.push("<div class='before-day hide'>"+r+"</div>"),s&&H.push("<div class='before-hour hide'>"+s+"</div>"),t&&H.push("<div class='end-date hide'>"+t+"</div>"),u&&H.push("<div class='end-time hide'>"+u+"</div>"),v&&H.push("<div class='price-cheap hide'>"+v+"</div>"),y.length>0&&H.push("<div class='cheap-ext hide'>"+y.join("")+"</div>"),x&&H.push("<div class='group-id hide'>"+x+"</div>"),H.push("</a>"),G.find(".box").append(H.join(""))}}}},u=function(b,c){if(l&&l.length>0)t(b,c);else if(e.jsonpUrl){var d=e.jsonpUrl;a.ajax({url:d,type:"GET",dataType:"jsonp",cache:!1,contentType:"application/json; charset=utf-8",success:function(a){return a.length<=0?(n.find(".prev").addClass("prev-off"),void n.find(".next").addClass("next-off")):(l=a,void t(b,c))}})}},v=function(a,b){var c=n.find(".calendar-mod[data-year='"+a+"'][data-month='"+b+"']");c.append("<div class='calendarBar'></div>");var d=c.find(".calendarBar"),e=[];e.push("<div class='fix'></div>"),e.push("<div class='current'><p class='year'>"+a+"</p><p class='month'>"+b+"月</p></div>"),d.html(e.join(""))},w=function(a){var b=k.find(".calendar-L"),c=k.find(".calendar-R");"next"==a?(b.html(c.html()),b.attr("data-year",c.attr("data-year")),b.attr("data-month",c.attr("data-month"))):"prev"==a&&(c.html(b.html()),c.attr("data-year",b.attr("data-year")),c.attr("data-month",b.attr("data-month")))},x=function(){var a=parseInt(k.find(".calendar-R").attr("data-year"),10),b=parseInt(k.find(".calendar-R").attr("data-month"),10),c=h.fixYearByMonth(a,b,"next");p(a+"-"+b,c,"next")},y=function(){var a=parseInt(k.find(".calendar-L").attr("data-year"),10),b=parseInt(k.find(".calendar-L").attr("data-month"),10),c=h.fixYearByMonth(a,b,"prev");p(c,a+"-"+b,"prev")},z=h.getYear(),A=h.getMonth();m&&(z=h.getYear(m),A=h.getMonth(m)),p(z+"-"+A,h.fixYearByMonth(z,A,"next")),e.preCallback(z,A)}})},a.fn.jsonMultiCalendar.option={jsonpUrl:"",latestDate:"",skipDays:0,extCallBack:function(a,b){},preCallback:function(a,b){}}}(jQuery);
//# sourceMappingURL=/sourcemaps/content/libs/plugin/jsonmulticalendar/jsonmulticalendar.min.js.map