var stepcarousel={ajaxloadingmsg:'<div style="margin: 1em; font-weight: bold"><img src="ajaxloadr.gif" style="vertical-align: middle" /> Fetching Content. Please wait...<\/div>',defaultbuttonsfade:.4,configholder:{},getCSSValue:function(n){return n=="auto"?0:parseInt(n)},getremotepanels:function(n,t){t.$belt.html(this.ajaxloadingmsg);n.ajax({url:t.contenttype[1],async:!0,error:function(n){t.$belt.html("Error fetching content.<br />Server Response: "+n.responseText)},success:function(i){t.$belt.html(i);t.$panels=t.$gallery.find("."+t.panelclass);stepcarousel.alignpanels(n,t)}})},getoffset:function(n,t){return n.offsetParent?n[t]+this.getoffset(n.offsetParent,t):n[t]},getCookie:function(n){var t=new RegExp(n+"=[^;]+","i");return document.cookie.match(t)?document.cookie.match(t)[0].split("=")[1]:null},setCookie:function(n,t){document.cookie=n+"="+t},fadebuttons:function(n,t){n.$leftnavbutton.fadeTo("fast",t==0?this.defaultbuttonsfade:1);n.$rightnavbutton.fadeTo("fast",t==n.lastvisiblepanel?this.defaultbuttonsfade:1);t==n.lastvisiblepanel&&stepcarousel.stopautostep(n)},addnavbuttons:function(n,t,i){return t.$leftnavbutton=n("<a href='javascript:void(0);' class='arrow-box prev hide icon-index png off'>&nbsp;<\/a>").appendTo("#"+t.galleryid+" .carousel-bar-btns"),t.$rightnavbutton=n("<a href='javascript:void(0);' class='arrow-box next hide icon-index png'>&nbsp;<\/a>").appendTo("#"+t.galleryid+" .carousel-bar-btns"),t.$leftnavbutton.bind("click",function(){stepcarousel.stepBy(t.galleryid,-t.defaultbuttons.moveby)}),t.$rightnavbutton.bind("click",function(){stepcarousel.stepBy(t.galleryid,t.defaultbuttons.moveby)}),t.panelbehavior.wraparound==!1&&this.fadebuttons(t,i),t.$leftnavbutton.add(t.$rightnavbutton)},alignpanels:function(n,t){var r=0,f,u,i,s,e,o;for(t.paneloffsets=[r],t.panelwidths=[],t.$panels.each(function(){var i=n(this);i.css({float:"none",position:"absolute",left:r+"px"});i.bind("click",function(n){return t.onpanelclick(n.target)});r+=stepcarousel.getCSSValue(i.css("marginRight"))+parseInt(i.get(0).offsetWidth||i.css("width"));t.paneloffsets.push(r);t.panelwidths.push(r-t.paneloffsets[t.paneloffsets.length-2])}),t.paneloffsets.pop(),f=0,u=t.$panels.length-1,t.lastvisiblepanel=u,i=t.$panels.length-1;i>=0;i--)f+=i==u?t.panelwidths[u]:t.paneloffsets[i+1]-t.paneloffsets[i],t.gallerywidth>f&&(t.lastvisiblepanel=i);t.$belt.css({width:r+"px"});t.currentpanel=t.panelbehavior.persist?parseInt(this.getCookie(t.galleryid+"persist")):0;t.currentpanel=typeof t.currentpanel=="number"&&t.currentpanel<t.$panels.length?t.currentpanel:0;s=t.paneloffsets[t.currentpanel]+(t.currentpanel==0?0:t.beltoffset);t.$belt.css({left:-s+"px"});t.defaultbuttons.enable==!0&&(e=this.addnavbuttons(n,t,t.currentpanel));t.autostep&&t.autostep.enable&&(o=t.$gallery.add(typeof e!="undefined"?e:null),o.bind("click",function(){t.autostep.status="stopped";stepcarousel.stopautostep(t)}),o.hover(function(){stepcarousel.stopautostep(t);t.autostep.hoverstate="over"},function(){t.steptimer&&t.autostep.hoverstate=="over"&&t.autostep.status!="stopped"&&(t.steptimer=setInterval(function(){stepcarousel.autorotate(t.galleryid)},t.autostep.pause),t.autostep.hoverstate="out")}),t.steptimer=setInterval(function(){stepcarousel.autorotate(t.galleryid)},t.autostep.pause));this.createpaginate(n,t);this.statusreport(t.galleryid);t.oninit();t.onslideaction(this)},stepTo:function(n,t){var i=stepcarousel.configholder[n],t,r;typeof i!="undefined"&&(stepcarousel.stopautostep(i),t=Math.min(t-1,i.paneloffsets.length-1),r=i.paneloffsets[t]+(t==0?0:i.beltoffset),i.panelbehavior.wraparound==!1&&i.defaultbuttons.enable==!0&&this.fadebuttons(i,t),i.$belt.animate({left:-r+"px"},i.panelbehavior.speed,function(){i.onslideaction(this)}),i.currentpanel=t,this.statusreport(n))},stepBy:function(n,t,i){var r=stepcarousel.configholder[n],f,u,e;typeof r!="undefined"&&(i||stepcarousel.stopautostep(r),f=t>0?"forward":"back",u=r.currentpanel+t,r.panelbehavior.wraparound==!1?(u=f=="back"&&u<=0?0:f=="forward"?Math.min(u,r.lastvisiblepanel):u,r.defaultbuttons.enable==!0&&stepcarousel.fadebuttons(r,u)):u>r.lastvisiblepanel&&f=="forward"?u=r.currentpanel<r.lastvisiblepanel?r.lastvisiblepanel:0:u<0&&f=="back"&&(u=r.currentpanel>0?0:r.lastvisiblepanel),e=r.paneloffsets[u]+(u==0?0:r.beltoffset),r.panelbehavior.wraparound==!0&&r.panelbehavior.wrapbehavior=="pushpull"&&(u==0&&f=="forward"||r.currentpanel==0&&f=="back")?r.$belt.animate({left:-r.paneloffsets[r.currentpanel]-(f=="forward"?100:-30)+"px"},"normal",function(){r.$belt.animate({left:-e+"px"},r.panelbehavior.speed,function(){r.onslideaction(this)})}):r.$belt.animate({left:-e+"px"},r.panelbehavior.speed,function(){r.onslideaction(this)}),r.currentpanel=u,this.statusreport(n))},autorotate:function(n){var t=stepcarousel.configholder[n];t.$belt.stop(!0,!0);this.stepBy(n,t.autostep.moveby,!0)},stopautostep:function(n){clearTimeout(n.steptimer)},statusreport:function(n){var t=stepcarousel.configholder[n],u,f,i,e,r;if(t.statusvars.length==3){for(u=t.currentpanel,f=0,i=u;i<t.paneloffsets.length;i++)if(f+=t.panelwidths[i],f>t.gallerywidth)break;for(u+=1,i=i+1==u?u:i,e=[u,i,t.panelwidths.length],r=0;r<t.statusvars.length;r++)window[t.statusvars[r]]=e[r],t.$statusobjs[r].text(e[r]+" ")}stepcarousel.selectpaginate(jQuery,n)},createpaginate:function(n,t){var r,u,e;if(t.$paginatediv.length==1){var i=t.$paginatediv.find('img["data-over"]:eq(0)'),o=[],s=[],f=i.attr("data-moveby")||1,h=(f==1?0:1)+Math.floor((t.lastvisiblepanel+1)/f),c=n("<div>").append(i.clone()).html();for(srcs=[i.attr("src"),i.attr("data-over"),i.attr("data-select")],r=0;r<h;r++)u=Math.min(r*f,t.lastvisiblepanel),s.push(c.replace(/>$/,' data-index="'+r+'" data-moveto="'+u+'" title="Move to Panel '+(u+1)+'">')+"\n"),o.push(u);e=n("<span><\/span>").replaceAll(i).append(s.join("")).find("img");e.css({cursor:"pointer"});t.$paginatediv.bind("click",function(i){var r=n(i.target);r.is("img")&&r.attr("data-over")&&stepcarousel.stepTo(t.galleryid,parseInt(r.attr("data-moveto"))+1)});t.$paginatediv.bind("mouseover mouseout",function(i){var r=n(i.target);r.is("img")&&r.attr("data-over")&&parseInt(r.attr("data-index"))!=t.pageinfo.curselected&&r.attr("src",srcs[i.type=="mouseover"?1:0])});t.pageinfo={controlpoints:o,$controls:e,srcs:srcs,prevselected:null,curselected:null}}},selectpaginate:function(n,t){var i=stepcarousel.configholder[t],r;if(i.$paginatediv.length==1){for(r=0;r<i.pageinfo.controlpoints.length;r++)i.pageinfo.controlpoints[r]<=i.currentpanel&&(i.pageinfo.curselected=r);typeof i.pageinfo.prevselected!=null&&i.pageinfo.$controls.eq(i.pageinfo.prevselected).attr("src",i.pageinfo.srcs[0]);i.pageinfo.$controls.eq(i.pageinfo.curselected).attr("src",i.pageinfo.srcs[2]);i.pageinfo.prevselected=i.pageinfo.curselected}},loadcontent:function(n,t){var i=stepcarousel.configholder[n];i.contenttype=["ajax",t];stepcarousel.stopautostep(i);stepcarousel.resetsettings($,i);stepcarousel.init(jQuery,i)},init:function(n,t){t.gallerywidth=t.$gallery.width();t.offsets={left:stepcarousel.getoffset(t.$gallery.get(0),"offsetLeft"),top:stepcarousel.getoffset(t.$gallery.get(0),"offsetTop")};t.$belt=t.$gallery.find("."+t.beltclass);t.$panels=t.$gallery.find("."+t.panelclass);t.panelbehavior.wrapbehavior=t.panelbehavior.wrapbehavior||"pushpull";t.$paginatediv=n("#"+t.galleryid+"-paginate");t.autostep&&(t.autostep.pause+=t.panelbehavior.speed);t.onpanelclick=typeof t.onpanelclick=="undefined"?function(){}:t.onpanelclick;t.onslideaction=typeof t.onslide=="undefined"?function(){}:function(i){n(i).stop();t.onslide()};t.oninit=typeof t.oninit=="undefined"?function(){}:t.oninit;t.beltoffset=stepcarousel.getCSSValue(t.$belt.css("marginLeft"));t.statusvars=t.statusvars||[];t.$statusobjs=[n("#"+t.statusvars[0]),n("#"+t.statusvars[1]),n("#"+t.statusvars[2])];t.currentpanel=0;stepcarousel.configholder[t.galleryid]=t;t.contenttype[0]=="ajax"&&typeof t.contenttype[1]!="undefined"?stepcarousel.getremotepanels(n,t):stepcarousel.alignpanels(n,t)},resetsettings:function(n,t){t.$gallery.unbind();t.$belt.stop();t.$panels.remove();t.$leftnavbutton&&(t.$leftnavbutton.remove(),t.$rightnavbutton.remove());t.$paginatediv.length==1&&(t.$paginatediv.unbind(),t.pageinfo.$controls.eq(0).attr("src",t.pageinfo.srcs[0]).removeAttr("data-index").removeAttr("data-moveto").removeAttr("title").end().slice(1).remove());t.autostep&&(t.autostep.status=null);t.panelbehavior.persist&&stepcarousel.setCookie(window[t.galleryid+"persist"],0)},setup:function(n){jQuery(document).ready(function(t){n.$gallery=t("#"+n.galleryid);stepcarousel.init(t,n)});jQuery(window).bind("unload",function(){stepcarousel.resetsettings($,n);n.panelbehavior.persist&&stepcarousel.setCookie(n.galleryid+"persist",n.currentpanel);jQuery.each(n,function(n,t){t=null});n=null})}};
/*
//# sourceMappingURL=stepcarousel.min.js.map
*/