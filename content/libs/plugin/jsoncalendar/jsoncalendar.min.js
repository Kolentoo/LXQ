/*! uzai - v0.1.11 - 2017 */

/*!
 * jsonchou 单日历插件,智能双半月日历
 * d:2014-08-12
 * v:0.1.2
 * modify:因兼容mobile 去除jquery deferred done事件
 * lulisheng 增加未付款余位
 */
!function(a){var b=["周日","周一","周二","周三","周四","周五","周六"],c=["SUN","MON","TUE","WED","THU","FRI","SAT"],d=[31,28,31,30,31,30,31,31,30,31,30,31],e=new Date,f={"0101":"元旦","0214":"情人节","0305":"学雷锋纪念日","0308":"妇女节","0312":"植树节","0315":"消费者权益日","0401":"愚人节","0405":"清明节","0501":"劳动节","0504":"青年节","0601":"儿童节","0701":"建党节","0801":"建军节","0903":"抗战胜利日","0910":"教师节",1124:"感恩节",1224:"平安夜",1225:"圣诞节"},g={"0101":"春节","0115":"元宵节","0505":"端午节","0815":"中秋节","0707":"七夕","0909":"重阳节",1208:"腊八节","0100":"除夕"},h={isLeapYear:function(a){return a%4===0&&a%100!==0||a%400===0},formatDate:function(a){return a?new Date(Date.parse(a.replace(/-/g,"/"))):new Date},compareDate:function(a,b){return a&&b?(a=Date.parse(a.replace(/-/g,"/")),b=Date.parse(b.replace(/-/g,"/")),a>b?1:a==b?0:-1):void 0},getYear:function(a){var b=a?this.formatDate(a):e;return b.getFullYear()},getMonth:function(a){var b=a?this.formatDate(a):e;return b.getMonth()+1},getDate:function(a){var b=a?this.formatDate(a):e;return b.getDate()},getFirstDate:function(a,b){return new Date(a,b-1,1).getDay()},getMonthDays:function(a,b){var c=b,e=0;return e=d[c-1],2===c&&(e=this.isLeapYear(a)?29:28),e},fixYearByMonth:function(a,b,c){var d=a,e=b;return"next"==c?(e=b+1,13===e&&(e=1,d+=1)):"prev"==c&&(e=b-1,0===e&&(e=12,d-=1)),d+"-"+e},getLunarBySolar:function(a){if(a){var b=(parseInt(a.split("-")[0],10),parseInt(a.split("-")[1],10),parseInt(a.split("-")[2],10),[54440,54432,55888,23208,22176,43736,9680,37584,51544,43344,46240,46416,46416,21928,19360,42416,21176,21168,43312,29864,27296,44368,19880,19296,38256,42208,53856,59696,54576,23200,27472,38608,19176,19152,42192,53848,53840,54560,55968,46496,22224,19160,18864,42168,42160,43600,46376,27936,44448,21936]),c=[64,2,7,0,80,4,9,0,96,4,0,32,96,5,0,48,176,6,0,80,2,7,0,80,3],d=function(a){var b=c[a-2001>>1];return 0===(a-2001&1)?b>>4:15&b},e=function(a,c){var e,f,g;return e=0,f=29,g=16-c,c>d(a)&&d(a)>0&&g--,(b[a-2001]&1<<g)>0&&f++,c==d(a)&&(e=(b[a-2001]&1<<g-1)>0?30:29),f+(e<<16)},f=function(a){var b,c;b=0;for(var d=1;12>=d;d++)c=e(a,d),b+=c>>16&65535,b+=65535&c;return b},g=function(a){var b,c="甲乙丙丁戊己庚辛壬癸",d="子丑寅卯辰巳午未申酉戌亥";return b=c.substr((a-4)%10,1),b+=d.substr((a-4)%12,1),b+"年"},i=function(a){return a+"月"},j=function(a){return a+"日"},k=function(a){var b,c,k,l,m=!1,n=6e4,o=60*n,p=24*o;if(!a)return"";var q=h.formatDate(a),r=Math.round(q.getTime()/p)-11323;if(23>r)iYear=2e3,k=12,l=r+7;else{for(r-=23,c=2001,k=1,l=1,b=f(c);r>=b;)r-=b,c++,b=f(c);for(b=65535&e(c,k);r>=b;){if(r-=b,k==d(c)){if(b=e(c,k)>>16,b>r){m=b>0?!0:!1;break}r-=b}k++,b=65535&e(c,k)}l+=r}return g(c)+"|"+(m?"闰":"平")+"|"+i(k)+"|"+j(l)};return k(a)}return""}};a.fn.jsonCalendar=function(d){var e=a.extend({},a.fn.jsonCalendar.option,d);return this.each(function(d,i){var j=a(this),k=[];if(j.get(0)){var l=e.latestDate;l&&new Date(l)<new Date&&(l=h.getYear()+"-"+h.getMonth()+"-"+h.getDate());var m=j.find(".j_jsonCalendarWrap"),n=function(d,i,l){var n=e.isSmart,o=d||h.getYear(),p=i||h.getMonth();m.get(0)&&m.remove(),j.append("<div class='clearfix j_jsonCalendarWrap'></div>"),m=j.find(".j_jsonCalendarWrap");var r=h.getDate(),s=h.getFirstDate(o,p),t=h.getMonthDays(o,p),u=h.fixYearByMonth(o,p,"prev"),v=h.getMonthDays(parseInt(u.split("-")[0],10),parseInt(u.split("-")[1],10)),w=h.fixYearByMonth(o,p,"next"),x=(h.getMonthDays(parseInt(w.split("-")[0],10),parseInt(w.split("-")[1],10)),[]);x.push("<div class='calendarBox'>"),x.push("<table>"),x.push("<thead>"),x.push("<tr>");for(var y=0;y<b.length;y++){var z="";(0===y||6===y)&&(z="class='th-weekend-tit'"),x.push("<th><p class='p1'><span class='s1'>周</span><span class='s2'>"+b[y].replace("周","")+"</span></p><p class='p2'>"+c[y]+"</p></th>")}x.push("</tr>"),x.push("</thead>"),x.push("<tbody>");var A=[],B=0,C=function(){for(B=s-1;B>=0;B--)A.push(parseInt("-"+(v-B),10));for(B=1;t>=B;B++)A.push(B);var a=42,b=a-s-t;for(B=0;b>B;B++)A.push(parseInt("-"+(B+1),10))},D=function(a){for(B=a;t>=B;B++)A.push(parseInt("-"+B,10));var b=42,c=b-(t-a);for(B=1;c>B;B++)A.push(B)},E=15;if(e.isSmart){var F=new Date(h.getYear(),h.getMonth()-1,15).getDay();E=15-F,n=r>=E&&d==h.getYear()&&i==h.getMonth()?!0:!1}else n=!1;for(n?D(E):C(),B=0;B<A.length;B++){var G=A[B],H="",I=B%7;if(0===I&&x.push("<tr>"),0>=G){H=n?"item item-half":"item item-gray",0===I?H+=" item-sun":6===I&&(H+=" item-sat");var J=parseInt(G.toString().replace("-",""),10);if(n&&h.getYear()==o&&h.getMonth()==p&&h.getDate()>J&&(H+=" item-expiry"),n&&h.getYear()==o&&h.getMonth()==p&&h.getDate()==J&&(H+=" today"),n)x.push("<td data-day='"+J+"' data-month='"+p+"'  data-year='"+o+"' class='"+H+"'><div class='box'><div class='day'>"+J+"</div></div></td>");else{var K;J>=20?K=h.fixYearByMonth(o,p,"prev"):15>=J&&(K=h.fixYearByMonth(o,p,"next")),x.push("<td data-day='"+J+"' data-month='"+K.split("-")[1]+"'  data-year='"+K.split("-")[0]+"' class='"+H+"'><div class='box'><div class='day'>"+J+"</div></div></td>")}}else H="item",0===I?H+=" item-sun":6===I&&(H+=" item-sat"),n||h.getYear()==o&&h.getMonth()==p&&h.getDate()>G&&(H+=" item-expiry"),n?x.push("<td  data-day='"+G+"' data-month='"+parseInt(w.split("-")[1],10)+"'  data-year='"+parseInt(w.split("-")[0],10)+"' class='"+H+"'><div class='box'><div class='day'>"+G+"</div></div></td>"):(h.getYear()==o&&h.getMonth()==p&&h.getDate()==G&&(H+=" today"),x.push("<td  data-day='"+G+"' data-month='"+p+"'  data-year='"+o+"' class='"+H+"'><div class='box'><div class='day'>"+G+"</div></div></td>"));6==I&&x.push("</tr>")}x.push("</tbody>"),x.push("</table>"),x.push("</div>"),m.html(x.join("")),m.attr("year",o),m.attr("month",p);var L=function(){var b=m.find(".item"),c=function(a,b){var c="";for(var d in b)if(d==a){c=b[d];break}return c};b.each(function(b,d){var e=a(this),i=parseInt(e.attr("data-year"),10),j=parseInt(e.attr("data-month"),10),k=parseInt(e.attr("data-day"),10);i=10>i?"0"+i:i+"",j=10>j?"0"+j:j+"",k=10>k?"0"+k:k+"";var l=c(j+k,f);if(!l){var m=h.getLunarBySolar(i+"-"+j+"-"+k);if(m){var n=m.split("|"),o=parseInt(n[2].replace("月",""),10),p=parseInt(n[3].replace("日",""),10),q=(10>o?"0"+o:o+"")+""+(10>p?"0"+p:p+"");l=c(q,g)}}if(l){var r=e.find(".box"),s=r.find("a.holiday");s.get(0)||(r.addClass("box-holiday"),r.append("<a class='holiday' href='javascript:;' title='"+l+"' >"+l+"</a>"))}})};L(),q(o,p,n);var M=function(){if(k&&k.length>0){var a=k;for(B=0;B<a.length;B++){var b=a[B],c=b.id?"data-id='"+b.id+"' ":" ",d=b.title,f=b.ext,g=b.date.replace("-0","-").replace("-0","-"),h=b.url?b.url:"#",i=b.url?"target='_blank' ":" ",j=b.price||0,l=b.Chprice||0,n=b.tag,q=parseInt(b.cut,10),r=b.beforeDay,s=b.beforeHour,t=b.endDate,u=b.endTime,v=b.priceCheap||0,w=b.cheapExt,x=parseInt(b.unpaycustnum,10),y=b.UzaiJouneryGroupID,z=[];if(w&&w.length>0)for(var A=0;A<w.length;A++){var C=w[A];z.push("<div class='cheap-item' data-tag='"+C.Tag+"'  data-desc='"+C.Desc+"'  data-price='"+C.Price+"'  data-max='"+C.Max+"' ></div>")}var D="";0===q&&0===x?D="<i class='sq'>售罄</i>":1>=q?D="":q>=2&&8>=q?D="<i class='yw'>余位:"+q+"</i>":q>=9&&(D="<i class='cz'>充足</i>");var E=g.split("-")[0],F=g.split("-")[1],G=g.split("-")[2],H=m.find(".item[data-year='"+E+"'][data-month='"+F+"'][data-day='"+G+"']");if(H.get(0)){var I=[];I.push("<a "+i+" "+c+" href='"+h+"' class='block'>"),d&&I.push("<div class='title hide'>"+d+"</div>"),f&&I.push("<div class='ext hide'>"+f+"</div>"),g&&I.push("<div class='date hide'>"+g+"</div>"),j&&(j.indexOf("￥")>-1?I.push("<div class='price hide'>"+j+"</div>"):I.push("<div class='price hide'>￥"+j+"</div>")),l&&(l.indexOf("￥")>-1?I.push("<div class='cprice hide'>"+l+"</div>"):I.push("<div class='cprice hide'>￥"+l+"</div>")),n&&I.push("<div class='tag hide'>"+n+"</div>"),D&&I.push("<div class='cut hide' data-cut='"+q+"' >"+D+"</div>"),r&&I.push("<div class='before-day hide'>"+r+"</div>"),s&&I.push("<div class='before-hour hide'>"+s+"</div>"),t&&I.push("<div class='end-date hide'>"+t+"</div>"),u&&I.push("<div class='end-time hide'>"+u+"</div>"),v&&I.push("<div class='price-cheap hide'>"+v+"</div>"),z.length>0&&I.push("<div class='cheap-ext hide'>"+z+"</div>"),y&&I.push("<div class='group-id hide'>"+y+"</div>"),I.push("</a>"),H.find(".box").append(I.join(""))}}}e.extCallBack(o,p)};if(e.jsonpUrl)if(k&&k.length>0)M();else{var N=e.jsonpUrl;a.ajax({url:N,type:"GET",cache:!1,dataType:"jsonp",contentType:"application/json; charset=utf-8",success:function(a){if(!a||a.length<=0){var b=m.find(".calendarBar");return b.find(".prev").addClass("prev-off"),void b.find(".next").addClass("next-off")}k=a,M()}})}else e.extCallBack(o,p)},o=function(){return parseInt(m.attr("year"),10)},p=function(){return parseInt(m.attr("month"),10)},q=function(b,c,d){var f=d||!1;f?m.append("<div class='calendarBar calendarBar-half'></div>"):m.append("<div class='calendarBar'></div>");var g=m.find(".calendarBar"),i=o(),j=p(),k=[],n=j==h.getMonth()&&i==h.getYear()?"prev-off":"";if(l){var q=h.getYear(l)+"-"+h.getMonth(l)+"-1",t=i+"-"+j+"-1";h.compareDate(q,t)}if(f){k.push("<div class='fix'></div>"),k.push("<div class='month-half month-half-prev'>"),k.push("<div class='prev "+n+"' title='上月'>上月</div>"),k.push("<div class='current'><p class='year'>"+i+"年</p><p class='month'>"+j+"月</p></div>"),k.push("</div>");var u=h.fixYearByMonth(i,j,"next");k.push("<div class='month-half month-half-next'>"),k.push("<div class='current'><p class='year'>"+parseInt(u.split("-")[0],10)+"年</p><p class='month'>"+parseInt(u.split("-")[1],10)+"月</p></div>"),k.push("<div class='next' title='下月'>下月</div>"),k.push("</div>")}else k.push("<div class='fix'></div>"),k.push("<div class='prev "+n+"' title='上月'>上月</div>"),k.push("<div class='current'><p class='year'>"+i+"年</p><p class='month'>"+j+"月</p></div>"),k.push("<div class='next' title='下月'>下月</div>");g.html(k.join("")),g.find(".prev").on("click",function(){var b=a(this);if(!b.hasClass("prev-off")){s();var c=h.fixYearByMonth(i,j,"prev");e.preCallback(parseInt(c.split("-")[0],10),parseInt(c.split("-")[1],10))}}),g.find(".next").on("click",function(){var b=a(this);if(!b.hasClass("next-off")){r();var c=h.fixYearByMonth(i,j,"next");e.preCallback(parseInt(c.split("-")[0],10),parseInt(c.split("-")[1],10))}})},r=function(){var a=o(),b=p(),c=h.fixYearByMonth(a,b,"next");n(parseInt(c.split("-")[0],10),parseInt(c.split("-")[1],10),"next")},s=function(){var a=o(),b=p(),c=h.fixYearByMonth(a,b,"prev");n(parseInt(c.split("-")[0],10),parseInt(c.split("-")[1],10),"prev")},t=h.getYear(),u=h.getMonth();l&&(t=h.getYear(l),u=h.getMonth(l)),n(t,u),e.preCallback(t,u)}})},a.fn.jsonCalendar.option={jsonpUrl:"",latestDate:"",isSmart:!1,extCallBack:function(a,b){},preCallback:function(a,b){}}}(window.jQuery||window.Zepto);
//# sourceMappingURL=/sourcemaps/content/libs/plugin/jsoncalendar/jsoncalendar.min.js.map